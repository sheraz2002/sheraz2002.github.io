<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ultrasonic Range Finder (FPGA · Spartan-3E) · Muhammad Sheraz</title>
  <link rel="stylesheet" href="../../styles.css"/>
  <style>
    /* Keep styling consistent with your other project pages */
    .project-page p strong { color: var(--clr-accent); }
    .title-row { display:flex; justify-content:space-between; align-items:baseline; margin-bottom:1rem; }
    .title-row h1 { margin:0; line-height:1; }
    .btn { padding:.5rem 1.2rem; font-size:1rem; line-height:1; display:inline-flex; align-items:center; gap:.4rem; white-space:nowrap; }
    figure { margin:1rem 0; text-align:center; }
    figure img { width:100%; max-width:100%; border-radius:.6rem; display:block; margin-inline:auto; }
    figure figcaption { font-size:.9rem; opacity:.85; margin-top:.35rem; }
    .two-col { display:grid; grid-template-columns:1fr; gap:1.1rem; }
    @media (min-width: 900px) { .two-col { grid-template-columns:1fr 1fr; } }
    .list-tight li { margin-bottom:.35rem; }
    .callout { padding:.9rem 1rem; border-radius:.6rem; background:rgba(125,255,200,.08); border:1px solid rgba(125,255,200,.25); }
    .metric { display:inline-block; padding:.3rem .55rem; border-radius:.35rem; background:rgba(255,213,79,.08); border:1px solid rgba(255,213,79,.35); margin:.15rem .25rem .15rem 0; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
    .tags { opacity:.85; margin-top:.25rem; }
    pre { background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.15); padding:1rem; border-radius:.6rem; overflow:auto; }
    code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
  </style>
</head>
<body>
  <div class="bg"></div>

  <nav class="nav glass container">
    <span class="logo">Muhammad Sheraz</span>
    <ul class="nav__links">
      <li><a href="../../index.html">Home</a></li>
      <li><a href="../../index.html?tab=ai#projects">AI Projects</a></li>
      <li><a href="../../index.html?tab=embedded#projects" class="active">Embedded & Control</a></li>
      <li><a href="../experience.html">Experience</a></li>
      <li><a href="../education.html">Education</a></li>
      <li><a href="../skills.html">Skills</a></li>
      <li><a href="../contact.html">Contact</a></li>
    </ul>
  </nav>

  <article class="project-page container glass">
    <div class="title-row">
      <h1>Ultrasonic Range Finder (FPGA · Spartan-3E)</h1>
    </div>
    <p class="tags">Spartan-3E Starter Kit · Verilog HDL · HC-SR04 · LCD Display · State Machine · PWM Servo · ModelSim</p>

    <p>
      I built a <strong>range finder</strong> on a <strong>Spartan-3 FPGA</strong> that measures distance with an <strong>HC-SR04 ultrasonic sensor</strong>
      and displays the result on an <strong>LCD</strong>. The design uses a <strong>state machine</strong> with counters to measure echo time,
      converts time-of-flight to distance, and includes a <strong>servo PWM</strong> add-on for scanning.
    </p>

    <div class="callout">
      <strong>Highlights:</strong>
      <span class="metric">Verilog on Spartan-3E</span>
      <span class="metric">HC-SR04 TOF</span>
      <span class="metric">LCD readout</span>
      <span class="metric">FSM + counters</span>
      <span class="metric">Servo PWM scan</span>
      <span class="metric">ModelSim sims</span>
    </div>

    <h2>Project Overview</h2>
    <p>
      The top module triggers the ultrasonic sensor, times the echo pulse with cycle-accurate counters, converts elapsed
      time to distance, and updates an LCD. A separate PWM block drives a servo so the sensor can sweep an area for
      basic scanning and object detection.
    </p>

    <h2>Hardware</h2>
    <ul class="list-tight">
      <li><strong>FPGA:</strong> Xilinx Spartan-3E starter kit</li>
      <li><strong>Sensor:</strong> HC-SR04 ultrasonic (Trig/Echo)</li>
      <li><strong>Actuator:</strong> hobby servo (PWM control)</li>
      <li><strong>Display:</strong> character LCD</li>
      <li><strong>Tools:</strong> Xilinx ISE, ModelSim</li>
    </ul>

    <div class="two-col">
      <figure>
        <img src="../../assets/cholesterol/fpga/ultra.jpg" alt="HC-SR04 ultrasonic sensor"/>
        <figcaption>Ultrasonic sensor used for time-of-flight measurement.</figcaption>
      </figure>
      <figure>
        <img src="../../assets/cholesterol/fpga/servo-mounted.jpg" alt="Ultrasonic sensor mounted on a servo"/>
        <figcaption>Sensor mounted on a servo for scanning.</figcaption>
      </figure>
    </div>

    <h2>System Architecture</h2>
    <ul class="list-tight">
      <li><strong>Idle:</strong> wait for measurement interval.</li>
      <li><strong>Trigger:</strong> assert 10&nbsp;µs pulse on <code>Trig</code>.</li>
      <li><strong>Wait Echo:</strong> wait for <code>Echo</code> to go high.</li>
      <li><strong>Measure:</strong> count clock cycles while <code>Echo</code> is high.</li>
      <li><strong>Compute:</strong> convert cycles → time → distance.</li>
      <li><strong>Display:</strong> send digits/formatting to the LCD.</li>
    </ul>

    <h2>Distance Calculation</h2>
    <p>
      Using time-of-flight (τ) and speed of sound (≈340&nbsp;m/s):
    </p>
    <pre><code>d = (τ · 340) / 2</code></pre>

    <h2>Verilog Modules</h2>
    <ul class="list-tight">
      <li><strong>ultrasonic_sensor:</strong> FSM for trigger/echo timing and distance register.</li>
      <li><strong>lcd_driver:</strong> updates the character LCD with the measured value.</li>
      <li><strong>servo_pwm:</strong> generates pulse widths for position control.</li>
      <li><strong>top:</strong> integrates sensor, LCD, and servo blocks.</li>
    </ul>

    <h2>Servo Add-On (PWM)</h2>
    <p>
      A lightweight PWM controller varies pulse width to set servo angle. Threshold values can be updated to sweep or
      lock at a set point, enabling simple area scans.
    </p>

    <h2>Simulation Results</h2>
    <div class="two-col">
      <figure>
        <img src="../../assets/cholesterol/fpga/modelsim-scho.jpg" alt="ModelSim waveform showing trigger and echo timing"/>
        <figcaption>Trigger/Echo timing and distance counter in ModelSim.</figcaption>
      </figure>
      <figure>
        <img src="../../assets/cholesterol/fpga/pwm.jpg" alt="ModelSim waveform of servo PWM"/>
        <figcaption>PWM waveform used for servo positioning.</figcaption>
      </figure>
    </div>

    <h2>Applications</h2>
    <ul class="list-tight">
      <li>Mobile robots: obstacle detection and avoidance</li>
      <li>Fixed installations: distance monitoring and presence sensing</li>
      <li>Scanning rigs: simple 2D sweeps with the servo mount</li>
    </ul>

    <h2>Tech Stack</h2>
    <ul class="list-tight">
      <li>Verilog HDL · Xilinx ISE · ModelSim</li>
      <li>Spartan-3E Starter Kit · HC-SR04 · Character LCD</li>
    </ul>

    <h2>Outcome</h2>
    <p>
      The design performs continuous distance measurement with stable LCD updates and verified timing in simulation.
      Adding the servo PWM extends it into a basic scanning rangefinder suitable for labs and robotics demos.
    </p>
  </article>

  <footer class="footer container">
    © <span id="year"></span> Muhammad Sheraz
  </footer>
  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
